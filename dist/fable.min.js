!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Fable=t()}}((function(){return function t(e,o,r){function n(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var g=o[s]={exports:{}};e[s][0].call(g.exports,(function(t){return n(e[s][1][t]||t)}),g,g.exports,t,e,o,r)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,o){
/**
* Base Logger Class
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
*/
const r=new(t("fable-uuid").FableUUID);e.exports=class{constructor(t,e){this._Settings=t,this.loggerUUID=r.getUUID()}initialize(){}trace(t,e){this.write("trace",t,e)}debug(t,e){this.write("debug",t,e)}info(t,e){this.write("info",t,e)}warn(t,e){this.write("warn",t,e)}error(t,e){this.write("error",t,e)}fatal(t,e){this.write("fatal",t,e)}write(t,e,o){return!0}}},{"fable-uuid":9}],2:[function(t,e,o){
/**
* Default Logger Provider Function --- Browser
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
*/
getDefaultProviders=()=>{let e={};return e.console=t("./Fable-Log-Logger-Console.js"),e},e.exports=getDefaultProviders()},{"./Fable-Log-Logger-Console.js":4}],3:[function(t,e,o){e.exports=[{loggertype:"console",streamtype:"console",level:"trace"}]},{}],4:[function(t,e,o){let r=t("./Fable-Log-BaseLogger.js");e.exports=class extends r{constructor(t,e){super(t),this._ShowTimeStamps=!!t.hasOwnProperty("ShowTimeStamps")&&1==t.ShowTimeStamps,this._FormattedTimeStamps=!!t.hasOwnProperty("FormattedTimeStamps")&&1==t.FormattedTimeStamps,this._ContextMessage=t.hasOwnProperty("Context")?` (${t.Context})`:e._Settings.hasOwnProperty("Product")?` (${e._Settings.Product})`:""}write(t,e,o){if(this._ShowTimeStamps&&this._FormattedTimeStamps){let o=(new Date).toISOString();console.log(`${o} [${t}]${this._ContextMessage} ${e}`)}else if(this._ShowTimeStamps){let o=+new Date;console.log(`${o} [${t}]${this._ContextMessage} ${e}`)}else console.log(`[${t}]${this._ContextMessage} ${e}`);void 0!==o&&console.log(JSON.stringify(o,null,4))}}},{"./Fable-Log-BaseLogger.js":1}],5:[function(t,e,o){
/**
* Fable Logging Add-on
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
* @module Fable Logger
*/
class r{constructor(e,o){let r="object"==typeof e?e:{};this._Settings=r,this._Providers=t("./Fable-Log-DefaultProviders.js"),this._StreamDefinitions=r.hasOwnProperty("LogStreams")?r.LogStreams:t("./Fable-Log-DefaultStreams.json"),this.logStreams=[],this.logProviders={},this.activeLogStreams={},this.logStreamsTrace=[],this.logStreamsDebug=[],this.logStreamsInfo=[],this.logStreamsWarn=[],this.logStreamsError=[],this.logStreamsFatal=[],this.datumDecorator=t=>t,this.uuid="string"==typeof r.Product?r.Product:"Default"}addLogger(t,e){if(this.activeLogStreams.hasOwnProperty(t.loggerUUID))return!1;switch(this.logStreams.push(t),this.activeLogStreams[t.loggerUUID]=!0,e){case"trace":this.logStreamsTrace.push(t);case"debug":this.logStreamsDebug.push(t);case"info":this.logStreamsInfo.push(t);case"warn":this.logStreamsWarn.push(t);case"error":this.logStreamsError.push(t);case"fatal":this.logStreamsFatal.push(t)}return!0}setDatumDecorator(t){this.datumDecorator="function"==typeof t?t:t=>t}trace(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsTrace.length;e++)this.logStreamsTrace[e].trace(t,o)}debug(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsDebug.length;e++)this.logStreamsDebug[e].debug(t,o)}info(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsInfo.length;e++)this.logStreamsInfo[e].info(t,o)}warn(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsWarn.length;e++)this.logStreamsWarn[e].warn(t,o)}error(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsError.length;e++)this.logStreamsError[e].error(t,o)}fatal(t,e){const o=this.datumDecorator(e);for(let e=0;e<this.logStreamsFatal.length;e++)this.logStreamsFatal[e].fatal(t,o)}initialize(){for(let t=0;t<this._StreamDefinitions.length;t++){let e=Object.assign({loggertype:"console",streamtype:"console",level:"info"},this._StreamDefinitions[t]);this._Providers.hasOwnProperty(e.loggertype)?this.addLogger(new this._Providers[e.loggertype](e,this),e.level):console.log(`Error initializing log stream: bad loggertype in stream definition ${JSON.stringify(e)}`)}for(let t=0;t<this.logStreams.length;t++)this.logStreams[t].initialize()}logTime(t,e){let o=void 0!==t?t:"Time",r=new Date;this.info(`${o} ${r} (epoch ${+r})`,e)}getTimeStamp(){return+new Date}getTimeDelta(t){return+new Date-t}logTimeDelta(t,e,o){let r=void 0!==e?e:"Time Measurement",n=+new Date;this.info(`${r} logged at (epoch ${+n}) took (${t}ms)`,o)}logTimeDeltaHuman(t,e,o){let r=void 0!==e?e:"Time Measurement",n=+new Date,i=parseInt(t%1e3),s=parseInt(t/1e3%60),a=parseInt(t/6e4%60),l=parseInt(t/36e5);i=i<10?"00"+i:i<100?"0"+i:i,s=s<10?"0"+s:s,a=a<10?"0"+a:a,l=l<10?"0"+l:l,this.info(`${r} logged at (epoch ${+n}) took (${t}ms) or (${l}:${a}:${s}.${i})`,o)}logTimeDeltaRelative(t,e,o){this.logTimeDelta(this.getTimeDelta(t),e,o)}logTimeDeltaRelativeHuman(t,e,o){this.logTimeDeltaHuman(this.getTimeDelta(t),e,o)}}e.exports={new:function(t){return new r(t)},FableLog:r}},{"./Fable-Log-DefaultProviders.js":2,"./Fable-Log-DefaultStreams.json":3}],6:[function(t,e,o){e.exports={Product:"ApplicationNameHere",ProductVersion:"0.0.0",ConfigFile:!1,LogStreams:[{level:"trace"}]}},{}],7:[function(t,e,o){(function(o){(function(){
/**
* Fable Settings Add-on
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
* @module Fable Settings
*/
const r=t("match-all");class n{constructor(e){this.default=this.buildDefaultSettings();let o=this.merge(e,this.buildDefaultSettings());if(this._PerformEnvTemplating=!o||!0!==o.NoEnvReplacement,this.base=JSON.parse(JSON.stringify(o)),o.DefaultConfigFile)try{o=this.merge(t(o.DefaultConfigFile),o)}catch(t){console.log("Fable-Settings Warning: Default configuration file specified but there was a problem loading it.  Falling back to base."),console.log("     Loading Exception: "+t)}if(o.ConfigFile)try{o=this.merge(t(o.ConfigFile),o)}catch(t){console.log("Fable-Settings Warning: Configuration file specified but there was a problem loading it.  Falling back to base."),console.log("     Loading Exception: "+t)}this.settings=o}buildDefaultSettings(){return JSON.parse(JSON.stringify(t("./Fable-Settings-Default")))}_resolveEnv(t){for(const e in t){const n=t[e];if("object"==typeof n)this._resolveEnv(n);else if("string"==typeof n&&n.indexOf("${")>=0){r(n,/\$\{(.*?)\}/g).toArray().forEach((r=>{const n=r.split("|");let i=o.env[n[0]]||"";!i&&n.length>1&&(i=n[1]),t[e]=t[e].replace("${"+r+"}",i)}))}}}merge(t,e){let o="object"==typeof t?t:{},r="object"==typeof e?e:this.settings,n=JSON.parse(JSON.stringify(o));return r=Object.assign(r,n),this._PerformEnvTemplating&&this._resolveEnv(r),r}fill(t){let e="object"==typeof t?t:{};return this.settings=Object.assign(e,this.settings),this.settings}}e.exports={new:function(t){return new n(t)},FableSettings:n}}).call(this)}).call(this,t("_process"))},{"./Fable-Settings-Default":6,_process:11,"match-all":10}],8:[function(t,e,o){e.exports=
/**
* Random Byte Generator - Browser version
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
*/
class{constructor(){this.getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)}generateWhatWGBytes(){let t=new Uint8Array(16);return this.getRandomValues(t),t}generateRandomBytes(){let t=new Uint8Array(16);for(let e,o=0;o<16;o++)0==(3&o)&&(e=4294967296*Math.random()),t[o]=e>>>((3&o)<<3)&255;return t}generate(){return this.getRandomValues?generateWhatWGBytes():generateRandomBytes()}}},{}],9:[function(t,e,o){
/**
* Fable UUID Generator
*
* @license MIT
*
* @author Steven Velozo <steven@velozo.com>
* @module Fable UUID
*/
var r=t("./Fable-UUID-Random.js");class n{constructor(t){this._UUIDModeRandom=!("object"!=typeof t||!t.hasOwnProperty("UUIDModeRandom"))&&1==t.UUIDModeRandom,this._UUIDLength="object"==typeof t&&t.hasOwnProperty("UUIDLength")?t.UUIDLength+0:8,this._UUIDRandomDictionary="object"==typeof t&&t.hasOwnProperty("UUIDDictionary")?t.UUIDDictionary+0:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.randomByteGenerator=new r,this._HexLookup=[];for(let t=0;t<256;++t)this._HexLookup[t]=(t+256).toString(16).substr(1)}bytesToUUID(t){let e=0;return[this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]],"-",this._HexLookup[t[e++]],this._HexLookup[t[e++]],"-",this._HexLookup[t[e++]],this._HexLookup[t[e++]],"-",this._HexLookup[t[e++]],this._HexLookup[t[e++]],"-",this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]],this._HexLookup[t[e++]]].join("")}generateUUIDv4(){new Array(16);var t=this.randomByteGenerator.generate();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUUID(t)}generateRandom(){let t="";for(let e=0;e<this._UUIDLength;e++)t+=this._UUIDRandomDictionary.charAt(Math.floor(Math.random()*(this._UUIDRandomDictionary.length-1)));return t}getUUID(){return this._UUIDModeRandom?this.generateRandom():this.generateUUIDv4()}}e.exports={new:function(t){return new n(t)},FableUUID:n}},{"./Fable-UUID-Random.js":8}],10:[function(t,e,o){"use strict";e.exports=function(t,e){return{input:t,regex:e,next:function(){var t=this.nextRaw();if(t)for(var e=1;e<t.length;e++)if(t[e])return t[e];return null},nextRaw:function(){return this.regex.exec(this.input)},toArray:function(){for(var t=[],e=null;e=this.next();)t.push(e);return t},reset:function(t){return this.regex.lastIndex=t||0}}}},{}],11:[function(t,e,o){var r,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,g=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?g=u.concat(g):c=-1,g.length&&m())}function m(){if(!h){var t=l(f);h=!0;for(var e=g.length;e;){for(u=g,g=[];++c<e;)u&&u[c].run();c=-1,e=g.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];g.push(new p(t,e)),1!==g.length||h||l(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],12:[function(t,e,o){
/**
* @license MIT
* @author <steven@velozo.com>
*/
const r=t("fable-settings").FableSettings,n=t("fable-uuid").FableUUID,i=t("fable-log").FableLog;class s{constructor(t){let e=new r(t);this.settingsManager=e,this.libUUID=new n(this.settingsManager.settings),this.log=new i(this.settingsManager.settings),this.log.initialize()}get settings(){return this.settingsManager.settings}get fable(){return this}getUUID(){return this.libUUID.getUUID()}}e.exports={new:function(t){return new s(t)},Fable:s}},{"fable-log":5,"fable-settings":7,"fable-uuid":9}]},{},[12])(12)}));
//# sourceMappingURL=fable.min.js.map
